.message-content {
  position: relative;
  max-width: var(--max-width);

  .text-content {
    margin: 0;
    word-break: break-word;
    line-height: 1.3125;
  }

  .message-title {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: 0.875rem;
    font-weight: 500;
    line-height: 1.25rem;
    color: var(--accent-color);

    &.interactive {
      cursor: pointer;

      &:hover {
        color: var(--accent-shade-color);
      }
    }

    & + .File {
      margin-top: .25rem;
    }
  }

  &.has-solid-background {
    box-shadow: 0 1px 2px rgba(114, 114, 114, 0.25);
    background: var(--background-color);
  }

  &.can-have-appendix, &.media.is-reply {
    padding: .3125rem .5rem .375rem;
  }

  &.can-have-appendix {
    .text-content:last-child::after {
      content: '';
      display: inline-block;
      width: var(--meta-safe-area-size);
      height: 1rem;
    }
  }

  &.document {
    padding: .5rem !important;

    .File + .text-content {
      margin-top: .5rem;
    }
  }

  &.voice,
  &.audio {
    .message-title,
    .Embedded {
      margin-top: -.1875rem;
      margin-bottom: .1875rem;
    }
  }

  &.voice {
    padding: .5rem !important;

    .Voice + .text-content {
      margin-top: .5rem;
    }
  }

  &.audio {
    min-width: 17.1875rem;
    padding: .5rem .5rem .8125rem !important;

    .Audio + .text-content {
      margin-top: .25rem;
      margin-bottom: -0.4375rem;
    }
  }
}

.message-content.media {
  .media-inner {
    display: flex;
    justify-content: center;
    align-items: center;

    &.has-viewer {
      cursor: pointer;
    }
  }

  &.text .media-inner,
  &.is-reply .media-inner {
    margin-left: -0.5625rem;
    margin-right: -0.5625rem;
  }

  &.text .media-inner {
    margin-top: -0.375rem;
  }

  &.is-reply .media-inner,
  .message-title ~ .media-inner {
    margin-top: 0.375rem;
    margin-bottom: -0.5rem;
  }

  // Moved below .is-reply to overwrite its styles
  &.text .media-inner {
    margin-bottom: 0.375rem;
  }

  .message-media-loading {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .message-media-duration,
  .message-upload-progress {
    background: rgba(0, 0, 0, .25);
    color: #fff;
    font-size: 0.75rem;
    position: absolute;
    left: .1875rem;
    top: .1875rem;
    z-index: 1;
    padding: 0 .375rem;
    border-radius: .75rem;
    line-height: 1.125rem;
  }

  .message-media-play-button {
    width: 4rem;
    height: 4rem;
    border-radius: 50%;
    background: rgba(black, 0.25);
    padding: 0.75rem;

    i {
      font-size: 2.5rem;
      color: white;
    }
  }
}

.forwarded-message {
  .message-content:not(.custom-shape) & {
    margin-top: 0.25rem;
    border-left: 0.125rem solid var(--accent-color);
    padding-left: 0.5rem;
  }

  --border-top-left-radius: var(--border-radius-messages-small);
  --border-top-right-radius: var(--border-radius-messages-small);
  --border-bottom-left-radius: var(--border-radius-messages-small);
  --border-bottom-right-radius: var(--border-radius-messages-small);

  .media-inner {
    margin: 0 !important;
    margin-bottom: 0.25rem !important;
  }
}

.long-word-break-all {
  word-break: break-all;
}

.text-entity-link {
  color: var(--color-links) !important;
  text-decoration: none;
  word-break: none;
  cursor: pointer;

  &:hover, &:active, &:visited {
    color: var(--color-links-hover) !important;
    text-decoration: underline;
  }
}

.text-entity-code, .text-entity-pre {
  color: var(--color-code);
  white-space: pre-wrap;
  margin: 0;
}
